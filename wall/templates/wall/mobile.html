<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Ð¡Ñ‚ÐµÐ½Ð³Ð°Ð·ÐµÑ‚Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð²</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'wall/mobile.css' %}?v=1">
</head>
<body>
    <div id="mobile-app">
        <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
        <header class="mobile-header">
            <h1>ÐŸÑ€Ð¾ÐµÐºÑ‚Ñ‹</h1>
            <button id="mobile-shuffle-btn" class="shuffle-btn">ðŸŽ²</button>
        </header>

        <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ -->
        <main class="mobile-content">
            <div id="mobile-carousel" class="mobile-carousel">
                {% for project in projects %}
                <div class="mobile-slide" data-project-id="{{ project.id }}" data-slug="{{ project.slug }}">
                    <div class="mobile-slide-content">
                        {% if project.cover %}
                        <div class="mobile-slide-cover" style="background-image: url('{{ project.cover.url }}');"></div>
                        {% endif %}
                        
                        <div class="mobile-slide-text">
                            <h2 class="mobile-slide-title">{{ project.title }}</h2>
                            <p class="mobile-slide-excerpt">{{ project.get_excerpt }}</p>
                            <button class="mobile-slide-btn" data-slug="{{ project.slug }}">ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ</button>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </main>

        <!-- Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ñ‹ -->
        <nav class="mobile-indicators">
            {% for project in projects %}
            <button class="mobile-indicator" data-index="{{ forloop.counter0 }}"></button>
            {% endfor %}
        </nav>

        <!-- ÐÐ°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ñ -->
        <div class="mobile-nav">
            <button id="prev-btn" class="nav-btn">â€¹</button>
            <span id="slide-counter" class="slide-counter">1 / {{ projects|length }}</span>
            <button id="next-btn" class="nav-btn">â€º</button>
        </div>
    </div>

    <!-- ÐœÐ¾Ð´Ð°Ð»ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° -->
    <div id="project-modal" class="modal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div class="modal-body">
                <!-- ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ÑÑ Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸ -->
            </div>
        </div>
    </div>

    <script src="{% static 'wall/mobile.js' %}?v=1"></script>
    <script>
        // ÐŸÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² JS
        window.mobileData = {
            projects: [
                {% for project in projects %}
                {
                    id: {{ project.id }},
                    title: "{{ project.title|escapejs }}",
                    slug: "{{ project.slug }}",
                    excerpt: "{{ project.get_excerpt|escapejs }}",
                    description: "{{ project.description|escapejs }}",
                    accent_color: "{{ project.accent_color }}",
                    priority: {{ project.priority }},
                    cover_url: "{% if project.cover %}{{ project.cover.url }}{% endif %}",
                    created_at: "{{ project.created_at|date:'Y-m-d' }}"
                }{% if not forloop.last %},{% endif %}
                {% endfor %}
            ],
            seed: "{{ seed }}"
        };
    </script>
</body>
</html>
